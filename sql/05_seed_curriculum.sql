-- sql/05_seed_curriculum.sql (FULL from 2024_MT_KHMT.pdf)
-- Note: The PDF states total credits = 128; the number of distinct course IDs extracted is 109.
BEGIN;
INSERT INTO programs(name, cohort_year, total_credits)
VALUES ('Khoa học Máy tính 2024 (HCMUT) - Program Plan', 2024, 128)
ON CONFLICT (name, cohort_year) DO NOTHING;

-- Upsert subjects
INSERT INTO subjects(subject_id, subject_name, credits, department, workload_score, is_active)
VALUES
('CH1003','Hóa đại cương',3,'CH',5.00,TRUE),
('CO1005','Nhập môn điện toán',3,'CO',5.00,TRUE),
('CO1007','Cấu trúc rời rạc cho khoa học máy tính',4,'CO',5.00,TRUE),
('CO1023','Hệ thống số',3,'CO',5.00,TRUE),
('CO1027','Kỹ thuật lập trình',3,'CO',5.00,TRUE),
('CO2001','Kỹ năng chuyên nghiệp cho kỹ sư',3,'CO',5.00,TRUE),
('CO2003','Cấu trúc dữ liệu và giải thuật',4,'CO',5.00,TRUE),
('CO2007','Kiến trúc máy tính',4,'CO',5.00,TRUE),
('CO2011','Mô hình hóa toán học',3,'CO',5.00,TRUE),
('CO2013','Hệ cơ sở dữ liệu',4,'CO',5.00,TRUE),
('CO2017','Hệ điều hành',3,'CO',5.00,TRUE),
('CO2039','Lập trình nâng cao',3,'CO',5.00,TRUE),
('CO3001','Công nghệ phần mềm',3,'CO',5.00,TRUE),
('CO3005','Nguyên lý ngôn ngữ lập trình',4,'CO',5.00,TRUE),
('CO3011','Quản lý dự án phần mềm',3,'CO',5.00,TRUE),
('CO3015','Kiểm tra phần mềm',3,'CO',5.00,TRUE),
('CO3017','Kiến trúc phần mềm',3,'CO',5.00,TRUE),
('CO3021','Hệ quản trị cơ sở dữ liệu',3,'CO',5.00,TRUE),
('CO3027','Thương mại điện tử',3,'CO',5.00,TRUE),
('CO3029','Khai phá dữ liệu',3,'CO',5.00,TRUE),
('CO3033','Bảo mật hệ thống thông tin',3,'CO',5.00,TRUE),
('CO3037','Phát triển ứng dụng internet of things',3,'CO',5.00,TRUE),
('CO3041','Hệ thống thông minh',3,'CO',5.00,TRUE),
('CO3043','Phát triển ứng dụng trên thiết bị di động',3,'CO',5.00,TRUE),
('CO3045','Lập trình game',3,'CO',5.00,TRUE),
('CO3049','Lập trình web',3,'CO',5.00,TRUE),
('CO3051','Hệ thống thiết bị di động',3,'CO',5.00,TRUE),
('CO3057','Xử lý ảnh số và thị giác máy tính',3,'CO',5.00,TRUE),
('CO3059','Đồ họa máy tính',3,'CO',5.00,TRUE),
('CO3061','Nhập môn trí tuệ nhân tạo',3,'CO',5.00,TRUE),
('CO3065','Công nghệ phần mềm nâng cao',3,'CO',5.00,TRUE),
('CO3067','Tính toán song song',3,'CO',5.00,TRUE),
('CO3069','Mật mã và an ninh mạng',3,'CO',5.00,TRUE),
('CO3085','Xử lý ngôn ngữ tự nhiên',3,'CO',5.00,TRUE),
('CO3089','Những chủ đề nâng cao trong khoa học máy tính',3,'CO',5.00,TRUE),
('CO3093','Mạng máy tính',3,'CO',5.00,TRUE),
('CO3101','Đồ án tổng hợp - hướng trí tuệ nhân tạo',1,'CO',5.00,TRUE),
('CO3103','Đồ án tổng hợp - hướng công nghệ phần mềm',1,'CO',5.00,TRUE),
('CO3105','Đồ án tổng hợp - hướng hệ thống thông tin',1,'CO',5.00,TRUE),
('CO3107','Thực tập đồ án môn học đa ngành - hướng trí tuệ nhân tạo',1,'CO',5.00,TRUE),
('CO3109','Thực tập đồ án môn học đa ngành - hướng công nghệ phần mềm',1,'CO',5.00,TRUE),
('CO3111','Thực tập đồ án môn học đa ngành - hướng hệ thống thông tin',1,'CO',5.00,TRUE),
('CO3115','Phân tích và thiết kế hệ thống',3,'CO',5.00,TRUE),
('CO3117','Học máy',3,'CO',5.00,TRUE),
('CO3119','Đồ án mạng máy tính',1,'CO',5.00,TRUE),
('CO3127','Đồ án tổng hợp - hướng kỹ thuật dữ liệu',1,'CO',5.00,TRUE),
('CO3129','Bảo mật Phần mềm',3,'CO',5.00,TRUE),
('CO3131','Công nghệ Phần mềm thế hệ mới',3,'CO',5.00,TRUE),
('CO3133','Học sâu và Ứng dụng',3,'CO',5.00,TRUE),
('CO3135','Lập trình cho Trí tuệ nhân tạo và Khoa học dữ liệu',3,'CO',5.00,TRUE),
('CO3137','Dữ liệu lớn',3,'CO',5.00,TRUE),
('CO3139','Chuyển đổi số',3,'CO',5.00,TRUE),
('CO3151','Quản trị mạng',3,'CO',5.00,TRUE),
('CO3153','Đánh giá an toàn mạng máy tính',3,'CO',5.00,TRUE),
('CO3335','Thực tập ngoài trường',2,'CO',5.00,TRUE),
('CO4029','Đồ án chuyên ngành',2,'CO',5.00,TRUE),
('CO4031','Kho dữ liệu và hệ hỗ trợ quyết định',3,'CO',5.00,TRUE),
('CO4033','Phân tích dữ liệu lớn và trí tuệ kinh doanh',3,'CO',5.00,TRUE),
('CO4035','Hệ hoạch định tài nguyên tổ chức',3,'CO',5.00,TRUE),
('CO4037','Hệ thống thông tin quản lý',3,'CO',5.00,TRUE),
('CO4039','Bảo mật sinh trắc',3,'CO',5.00,TRUE),
('CO4337','Đồ án tốt nghiệp (Khoa học Máy tính)',4,'CO',5.00,TRUE),
('IM1013','Kinh tế học đại cương',3,'IM',5.00,TRUE),
('IM1023','Quản lý sản xuất cho kỹ sư',3,'IM',5.00,TRUE),
('IM1027','Kinh tế kỹ thuật',3,'IM',5.00,TRUE),
('IM1031','Khởi nghiệp và Đổi mới sáng tạo',3,'IM',5.00,TRUE),
('IM3001','Quản trị kinh doanh cho kỹ sư',3,'IM',5.00,TRUE),
('LA1003','Anh văn 1',2,'LA',5.00,TRUE),
('LA1005','Anh văn 2',2,'LA',5.00,TRUE),
('LA1007','Anh văn 3',2,'LA',5.00,TRUE),
('LA1009','Anh văn 4',2,'LA',5.00,TRUE),
('ME1019','Quản lý năng suất và chất lượng',3,'ME',5.00,TRUE),
('MI1003','Giáo dục Quốc phòng',0,'MI',5.00,TRUE),
('MT1003','Giải tích 1',4,'MT',5.00,TRUE),
('MT1005','Giải tích 2',4,'MT',5.00,TRUE),
('MT1007','Đại số Tuyến tính',3,'MT',5.00,TRUE),
('MT2013','Xác suất và thống kê',4,'MT',5.00,TRUE),
('PE1009','Bóng đá (Học phần 1)',0,'PE',5.00,TRUE),
('PE1011','Bóng chuyền (Học phần 1)',0,'PE',5.00,TRUE),
('PE1013','Bóng bàn (Học phần 1)',0,'PE',5.00,TRUE),
('PE1015','Bóng rổ (Học phần 1)',0,'PE',5.00,TRUE),
('PE1017','Cầu lông (Học phần 1)',0,'PE',5.00,TRUE),
('PE1019','Bơi (học Phần 1)',0,'PE',5.00,TRUE),
('PE1021','Aerobic (học Phần 1)',0,'PE',5.00,TRUE),
('PE1025','Điền kinh (Học phần 1)',0,'PE',5.00,TRUE),
('PE1027','Quần vợt (Học phần 1)',0,'PE',5.00,TRUE),
('PE1033','Bóng đá (Học phần 2)',0,'PE',5.00,TRUE),
('PE1035','Bóng chuyền (Học phần 2)',0,'PE',5.00,TRUE),
('PE1037','Bóng bàn (Học phần 2)',0,'PE',5.00,TRUE),
('PE1039','Bóng rổ (Học phần 2)',0,'PE',5.00,TRUE),
('PE1041','Cầu lông (Học phần 2)',0,'PE',5.00,TRUE),
('PE1043','Bơi (học Phần 2)',0,'PE',5.00,TRUE),
('PE1045','Aerobic (học Phần 2)',0,'PE',5.00,TRUE),
('PE1049','Điền kinh (học phần 2)',0,'PE',5.00,TRUE),
('PE1051','Quần vợt (Học phần 2)',0,'PE',5.00,TRUE),
('PE1053','Cờ vua (Học phần 1)',0,'PE',5.00,TRUE),
('PE1055','Cờ vua (học phần 2)',0,'PE',5.00,TRUE),
('PE1057','Bowling (học phần 1)',0,'PE',5.00,TRUE),
('PE1059','Bowling (học phần 2)',0,'PE',5.00,TRUE),
('PE1061','Pickleball (học phần 1)',0,'PE',5.00,TRUE),
('PE1063','Pickleball (học phần 2)',0,'PE',5.00,TRUE),
('PH1003','Vật lý 1',4,'PH',5.00,TRUE),
('PH1007','Thí nghiệm Vật lý',1,'PH',5.00,TRUE),
('SP1007','Pháp luật Việt Nam đại cương',2,'SP',5.00,TRUE),
('SP1031','Triết học Mác - Lênin',3,'SP',5.00,TRUE),
('SP1033','Kinh tế chính trị Mác - Lênin',2,'SP',5.00,TRUE),
('SP1035','Chủ nghĩa xã hội khoa học',2,'SP',5.00,TRUE),
('SP1037','Tư tưởng Hồ Chí Minh',2,'SP',5.00,TRUE),
('SP1039','Lịch sử Đảng Cộng sản Việt Nam',2,'SP',5.00,TRUE)
ON CONFLICT (subject_id) DO UPDATE SET
  subject_name=EXCLUDED.subject_name,
  credits=EXCLUDED.credits,
  department=EXCLUDED.department,
  is_active=EXCLUDED.is_active;

-- Map subjects to program with coarse course_type classification
INSERT INTO program_courses(program_id, subject_id, course_type, elective_group, recommended_semester, is_summer_friendly)
SELECT p.program_id, x.subject_id, x.course_type, NULL, x.rec_sem, x.summer
FROM programs p
JOIN (VALUES
('CH1003','CORE',5,FALSE),
('CO1005','CORE',1,FALSE),
('CO1007','CORE',2,FALSE),
('CO1023','CORE',1,FALSE),
('CO1027','CORE',2,FALSE),
('CO2001','CORE',6,FALSE),
('CO2003','CORE',3,FALSE),
('CO2007','CORE',3,FALSE),
('CO2011','CORE',3,FALSE),
('CO2013','CORE',5,FALSE),
('CO2017','CORE',4,FALSE),
('CO2039','CORE',4,FALSE),
('CO3001','CORE',5,FALSE),
('CO3005','CORE',6,FALSE),
('CO3011','ELECTIVE_GROUP',7,FALSE),
('CO3015','ELECTIVE_GROUP',7,FALSE),
('CO3017','ELECTIVE_GROUP',7,FALSE),
('CO3021','ELECTIVE_GROUP',7,FALSE),
('CO3027','ELECTIVE_GROUP',7,FALSE),
('CO3029','ELECTIVE_GROUP',7,FALSE),
('CO3033','ELECTIVE_GROUP',7,FALSE),
('CO3037','ELECTIVE_GROUP',7,FALSE),
('CO3041','ELECTIVE_GROUP',7,FALSE),
('CO3043','ELECTIVE_GROUP',7,FALSE),
('CO3045','ELECTIVE_GROUP',7,FALSE),
('CO3049','ELECTIVE_GROUP',7,FALSE),
('CO3051','ELECTIVE_GROUP',7,FALSE),
('CO3057','ELECTIVE_GROUP',7,FALSE),
('CO3059','ELECTIVE_GROUP',7,FALSE),
('CO3061','ELECTIVE_GROUP',7,FALSE),
('CO3065','ELECTIVE_GROUP',7,FALSE),
('CO3067','ELECTIVE_GROUP',7,FALSE),
('CO3069','ELECTIVE_GROUP',7,FALSE),
('CO3085','ELECTIVE_GROUP',7,FALSE),
('CO3089','ELECTIVE_GROUP',7,FALSE),
('CO3093','CORE',5,FALSE),
('CO3101','ELECTIVE_GROUP',5,FALSE),
('CO3103','ELECTIVE_GROUP',5,FALSE),
('CO3105','ELECTIVE_GROUP',5,FALSE),
('CO3107','ELECTIVE_GROUP',6,FALSE),
('CO3109','ELECTIVE_GROUP',6,FALSE),
('CO3111','ELECTIVE_GROUP',6,FALSE),
('CO3115','ELECTIVE_GROUP',7,FALSE),
('CO3117','ELECTIVE_GROUP',7,FALSE),
('CO3119','ELECTIVE_GROUP',5,FALSE),
('CO3127','ELECTIVE_GROUP',5,FALSE),
('CO3129','ELECTIVE_GROUP',7,FALSE),
('CO3131','ELECTIVE_GROUP',7,FALSE),
('CO3133','ELECTIVE_GROUP',7,FALSE),
('CO3135','ELECTIVE_GROUP',7,FALSE),
('CO3137','ELECTIVE_GROUP',7,FALSE),
('CO3139','ELECTIVE_GROUP',7,FALSE),
('CO3151','ELECTIVE_GROUP',7,FALSE),
('CO3153','ELECTIVE_GROUP',7,FALSE),
('CO3335','CORE',6,FALSE),
('CO4029','CORE',7,FALSE),
('CO4031','ELECTIVE_GROUP',7,FALSE),
('CO4033','ELECTIVE_GROUP',7,FALSE),
('CO4035','ELECTIVE_GROUP',7,FALSE),
('CO4037','ELECTIVE_GROUP',7,FALSE),
('CO4039','ELECTIVE_GROUP',7,FALSE),
('CO4337','CORE',8,FALSE),
('IM1013','ELECTIVE_GROUP',7,FALSE),
('IM1023','ELECTIVE_GROUP',7,FALSE),
('IM1027','ELECTIVE_GROUP',7,FALSE),
('IM1031','ELECTIVE_GROUP',7,FALSE),
('IM3001','ELECTIVE_GROUP',7,FALSE),
('LA1003','CORE',1,FALSE),
('LA1005','CORE',2,FALSE),
('LA1007','CORE',3,FALSE),
('LA1009','CORE',4,FALSE),
('ME1019','ELECTIVE_GROUP',7,FALSE),
('MI1003','MILITARY',NULL,FALSE),
('MT1003','CORE',1,FALSE),
('MT1005','CORE',2,FALSE),
('MT1007','CORE',2,FALSE),
('MT2013','CORE',4,FALSE),
('PE1009','PE',NULL,FALSE),
('PE1011','PE',NULL,FALSE),
('PE1013','PE',NULL,FALSE),
('PE1015','PE',NULL,FALSE),
('PE1017','PE',NULL,FALSE),
('PE1019','PE',NULL,FALSE),
('PE1021','PE',NULL,FALSE),
('PE1025','PE',NULL,FALSE),
('PE1027','PE',NULL,FALSE),
('PE1033','PE',NULL,FALSE),
('PE1035','PE',NULL,FALSE),
('PE1037','PE',NULL,FALSE),
('PE1039','PE',NULL,FALSE),
('PE1041','PE',NULL,FALSE),
('PE1043','PE',NULL,FALSE),
('PE1045','PE',NULL,FALSE),
('PE1049','PE',NULL,FALSE),
('PE1051','PE',NULL,FALSE),
('PE1053','PE',NULL,FALSE),
('PE1055','PE',NULL,FALSE),
('PE1057','PE',NULL,FALSE),
('PE1059','PE',NULL,FALSE),
('PE1061','PE',NULL,FALSE),
('PE1063','PE',NULL,FALSE),
('PH1003','CORE',1,FALSE),
('PH1007','CORE',2,FALSE),
('SP1007','POLITICAL',NULL,TRUE),
('SP1031','POLITICAL',NULL,TRUE),
('SP1033','POLITICAL',NULL,TRUE),
('SP1035','POLITICAL',NULL,TRUE),
('SP1037','POLITICAL',NULL,TRUE),
('SP1039','POLITICAL',NULL,TRUE)
) AS x(subject_id, course_type, rec_sem, summer)
  ON TRUE
WHERE p.name = 'Khoa học Máy tính 2024 (HCMUT) - Program Plan' AND p.cohort_year=2024
ON CONFLICT (program_id, subject_id) DO UPDATE SET
  course_type=EXCLUDED.course_type,
  recommended_semester=EXCLUDED.recommended_semester,
  is_summer_friendly=EXCLUDED.is_summer_friendly;

-- Semester plan (1..8) derived from PDF order
INSERT INTO semester_plan(program_id, semester_no, subject_id, priority, is_required)
SELECT p.program_id, x.semester_no, x.subject_id, x.priority, TRUE
FROM programs p
JOIN (VALUES
(1,'LA1003',10),
(1,'MT1003',20),
(1,'PH1003',30),
(1,'CO1005',40),
(1,'CO1023',50),
(1,'PE1009',60),
(1,'PE1011',70),
(1,'PE1013',80),
(1,'PE1015',90),
(1,'PE1017',100),
(1,'PE1019',110),
(1,'PE1021',120),
(1,'PE1025',130),
(1,'PE1027',140),
(1,'PE1053',150),
(1,'PE1057',160),
(1,'PE1061',170),
(2,'LA1005',10),
(2,'MT1005',20),
(2,'MT1007',30),
(2,'CO1007',40),
(2,'CO1027',50),
(2,'PH1007',60),
(2,'MI1003',70),
(2,'PE1033',80),
(2,'PE1035',90),
(2,'PE1037',100),
(2,'PE1039',110),
(2,'PE1041',120),
(2,'PE1043',130),
(2,'PE1045',140),
(2,'PE1049',150),
(2,'PE1051',160),
(2,'PE1055',170),
(2,'PE1059',180),
(2,'PE1063',190),
(3,'LA1007',10),
(3,'SP1031',20),
(3,'CO2007',30),
(3,'CO2011',40),
(3,'CO2003',50),
(4,'LA1009',10),
(4,'SP1033',20),
(4,'CO2017',30),
(4,'CO2039',40),
(4,'MT2013',50),
(5,'SP1035',10),
(5,'CO3093',20),
(5,'CO2013',30),
(5,'CO3001',40),
(5,'CH1003',50),
(5,'CO3101',60),
(5,'CO3103',70),
(5,'CO3105',80),
(5,'CO3127',90),
(5,'CO3119',100),
(6,'SP1039',10),
(6,'CO2001',20),
(6,'CO3005',30),
(6,'CO3335',40),
(6,'CO3107',50),
(6,'CO3109',60),
(6,'CO3111',70),
(7,'SP1037',10),
(7,'CO4029',20),
(7,'CO3011',30),
(7,'CO3015',40),
(7,'CO3017',50),
(7,'CO3021',60),
(7,'CO3027',70),
(7,'CO3029',80),
(7,'CO3033',90),
(7,'CO3037',100),
(7,'CO3041',110),
(7,'CO3043',120),
(7,'CO3045',130),
(7,'CO3049',140),
(7,'CO3051',150),
(7,'CO3057',160),
(7,'CO3059',170),
(7,'CO3061',180),
(7,'CO3065',190),
(7,'CO3067',200),
(7,'CO3069',210),
(7,'CO3085',220),
(7,'CO3089',230),
(7,'CO3115',240),
(7,'CO3117',250),
(7,'CO3129',260),
(7,'CO3131',270),
(7,'CO3133',280),
(7,'CO3135',290),
(7,'CO3137',300),
(7,'CO3139',310),
(7,'CO3151',320),
(7,'CO3153',330),
(7,'CO4031',340),
(7,'CO4033',350),
(7,'CO4035',360),
(7,'CO4037',370),
(7,'CO4039',380),
(7,'IM1013',390),
(7,'IM1023',400),
(7,'IM1027',410),
(7,'IM3001',420),
(7,'IM1031',430),
(7,'ME1019',440),
(8,'SP1007',10),
(8,'CO4337',20),
(8,'CO3011',30),
(8,'CO3015',40),
(8,'CO3017',50),
(8,'CO3021',60),
(8,'CO3027',70),
(8,'CO3029',80),
(8,'CO3033',90),
(8,'CO3037',100),
(8,'CO3041',110),
(8,'CO3043',120),
(8,'CO3045',130),
(8,'CO3049',140),
(8,'CO3051',150),
(8,'CO3057',160),
(8,'CO3059',170),
(8,'CO3061',180),
(8,'CO3065',190),
(8,'CO3067',200),
(8,'CO3069',210),
(8,'CO3085',220),
(8,'CO3089',230),
(8,'CO3115',240),
(8,'CO3117',250),
(8,'CO3129',260),
(8,'CO3131',270),
(8,'CO3133',280),
(8,'CO3135',290),
(8,'CO3137',300),
(8,'CO3139',310),
(8,'CO3151',320),
(8,'CO3153',330),
(8,'CO4031',340),
(8,'CO4033',350),
(8,'CO4035',360),
(8,'CO4037',370),
(8,'CO4039',380)
) AS x(semester_no, subject_id, priority)
  ON TRUE
WHERE p.name = 'Khoa học Máy tính 2024 (HCMUT) - Program Plan' AND p.cohort_year=2024
ON CONFLICT (program_id, semester_no, subject_id) DO UPDATE SET
  priority=EXCLUDED.priority;

-- Prerequisites parsed from notes (TQ/SH/KN)
INSERT INTO prerequisites(subject_id, prereq_subject_id, relation_type)
VALUES
('CO2001','CO1005','PREREQ'),
('CO2011','CO1007','RECOMMENDED'),
('CO3001','CO1027','RECOMMENDED'),
('CO3005','CO1027','PREREQ'),
('CO3021','CO2013','RECOMMENDED'),
('CO3033','CO2013','RECOMMENDED'),
('CO3049','CO2013','RECOMMENDED'),
('CO4029','CO3335','COREQ'),
('CO4031','CO2013','RECOMMENDED'),
('CO4035','CO2013','RECOMMENDED'),
('LA1005','LA1003','PREREQ'),
('LA1007','LA1005','PREREQ'),
('MT1005','MT1003','RECOMMENDED'),
('SP1033','SP1031','RECOMMENDED'),
('SP1035','SP1033','RECOMMENDED'),
('SP1037','SP1039','RECOMMENDED'),
('SP1039','SP1035','RECOMMENDED')
ON CONFLICT (subject_id, prereq_subject_id, relation_type) DO NOTHING;

COMMIT;
